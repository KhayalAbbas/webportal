Phase 4.12 Preflight
====================

OpenAPI excerpt (first 120 lines from /openapi.json)
---------------------------------------------------
status 200
001: {"openapi":"3.1.0","info":{"title":"ATS Research Engine","description":"Backend API for SaaS ATS + Agentic Research Engine","version":"0.1.0"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Basic health check.\n\nReturns OK if the API is running.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health/db":{"get":{"tags":["Health"],"summary":"Database Health Check","description":"Database health check.\n\nReturns OK if the database connection is working.","operationId":"database_health_check_health_db_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/internal/db-health":{"get":{"tags":["Internal"],"summary":"Database Health Check","description":"Internal database health check endpoint.\n\nRuns test queries to verify database schema matches models.\nReturns HTML for browser viewing.","operationId":"database_health_check_internal_db_health_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/internal/db-health/json":{"get":{"tags":["Internal"],"summary":"Database Health Check Json","description":"Internal database health check endpoint (JSON format).\n\nReturns JSON for programmatic access.","operationId":"database_health_check_json_internal_db_health_json_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/internal/seed-info":{"get":{"tags":["Internal"],"summary":"Seed Info","description":"Display seed data information (admin only).\n\nShows tenant IDs and test user credentials (except passwords).","operationId":"seed_info_internal_seed_info_get","parameters":[{"name":"session","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["Authentication"],"summary":"Login","description":"Authenticate user and return JWT access token.\n\nRequires X-Tenant-ID header to identify the tenant.","operationId":"login_auth_login_post","parameters":[{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/users":{"post":{"tags":["Authentication"],"summary":"Create User","description":"Create a new user in the system.\n\nOnly admin users can create new users.\nThe new user must belong to the same tenant as the admin.","operationId":"create_user_auth_users_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"get":{"tags":["Authentication"],"summary":"List Users","description":"List all users in the current tenant.\n\nOnly admin users can list all users.","operationId":"list_users_auth_users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserRead"},"title":"Response List Users Auth Users Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/users/me":{"get":{"tags":["Authentication"],"summary":"Get Current User Info","description":"Get information about the currently authenticated user.","operationId":"get_current_user_info_auth_users_me_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/users/{user_id}":{"patch":{"tags":["Authentication"],"summary":"Update User","description":"Update a user's information.\n\nOnly admin users can update other users.","operationId":"update_user_auth_users__user_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/companies":{"get":{"tags":["companies"],"summary":"List Companies","description":"List companies with pagination and filters.\n\nFilters: bd_status, bd_owner, is_client, is_prospect.","operationId":"list_companies_companies_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"bd_status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bd Status"}},{"name":"bd_owner","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bd Owner"}},{"name":"is_client","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Client"}},{"name":"is_prospect","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Prospect"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CompanyRead"},"title":"Response List Companies Companies Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"post":{"tags":["companies"],"summary":"Create Company","description":"Create a new company.","operationId":"create_company_companies_post","parameters":[{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/companies/{company_id}":{"get":{"tags":["companies"],"summary":"Get Company","description":"Get a company by ID.","operationId":"get_company_companies__company_id__get","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Company Id"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"put":{"tags":["companies"],"summary":"Update Company","description":"Update a company.","operationId":"update_company_companies__company_id__put","parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Company Id"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompanyRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/companies/{company_id}/research":{"get":{"tags":["companies"],"summary":"Get Company Research","description":"Get all research data for a company.\n\nReturns:\n- All research events for this company\n- All source documents attached to those events\n- All AI enrichment records for this company","operationId":"get_company_research_companies__company_id__research_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"company_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Company Id"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EntityResearchData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/candidates":{"get":{"tags":["candidates"],"summary":"List Candidates","description":"List candidates with pagination and filters.\n\nFilters: current_title, current_company, home_country.","operationId":"list_candidates_candidates_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}},{"name":"current_title","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Title"}},{"name":"current_company","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Company"}},{"name":"home_country","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Home Country"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CandidateRead"},"title":"Response List Candidates Candidates Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"post":{"tags":["candidates"],"summary":"Create Candidate","description":"Create a new candidate.","operationId":"create_candidate_candidates_post","parameters":[{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/candidates/{candidate_id}":{"get":{"tags":["candidates"],"summary":"Get Candidate","description":"Get a candidate by ID.","operationId":"get_candidate_candidates__candidate_id__get","parameters":[{"name":"candidate_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Candidate Id"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"put":{"tags":["candidates"],"summary":"Update Candidate","description":"Update a candidate.","operationId":"update_candidate_candidates__candidate_id__put","parameters":[{"name":"candidate_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Candidate Id"}},{"name":"x-tenant-id","in":"header","required":false,"schema":{"type":"string","title":"X-Tenant-Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CandidateRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}

Alembic
-------
Current: f6a7db6d5c11 (mergepoint)
Heads:   0a4d7b8f6bca (head)

Git status
----------
## master...origin/master
 M app/models/company_research.py
 M app/routers/company_research.py
 M app/services/company_research_service.py
 M app/ui/routes/company_research.py
 M app/ui/templates/company_research_run_detail.html
?? alembic/versions/0a4d7b8f6bca_phase4_12_executive_discovery.py
?? app/schemas/executive_discovery.py
?? scripts/proofs/fixtures/phase_4_12_exec_discovery_mock.json
?? scripts/proofs/phase_4_12_executive_discovery.py
