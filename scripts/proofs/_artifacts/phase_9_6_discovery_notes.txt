Phase 9.6 discovery notes
- Eligibility: endpoint /company-research/runs/{run_id}/executive-discovery/eligible lists only accepted + exec_search_enabled companies ([app/routers/company_research.py#L642-L676](app/routers/company_research.py#L642-L676)) and queries review_status='accepted' with exec_search_enabled True ([app/services/company_research_service.py#L3246-L3259](app/services/company_research_service.py#L3246-L3259)).
- Run endpoint modes: /company-research/runs/{run_id}/executive-discovery/run supports internal/external/both and currently concatenates internal stub + external ingest without prechecking eligibility at the API layer ([app/routers/company_research.py#L678-L739](app/routers/company_research.py#L678-L739)).
- External ingest idempotency: hashes request/response (sha256) with engine prefix, stores both as llm_json SourceDocuments, creates AIEnrichmentRecord, and gates companies against eligibility; evidence-first persistence adds ExecutiveProspects/Evidence and URL sources with dedupe ([app/services/company_research_service.py#L3290-L3536](app/services/company_research_service.py#L3290-L3536)).
- Internal stub: builds deterministic payload (fixed generated_at, query) for eligible companies only, reuses ingest_executive_llm_json_payload with engine='internal' and returns skipped when no eligible companies ([app/services/company_research_service.py#L3596-L3684](app/services/company_research_service.py#L3596-L3684)).
